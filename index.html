<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="theme-color" content="#1c4434">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="NutriPlan">
  <title>NutriPlan</title>

  <!-- PWA manifest e icona -->
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" id="appleTouchIcon" href="icon.svg">
  <link rel="icon" type="image/svg+xml" href="icon.svg">

  <!-- CSS â€” ordine obbligatorio -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="base.css">
  <link rel="stylesheet" href="nav.css">
  <link rel="stylesheet" href="layout.css">
  <link rel="stylesheet" href="components.css">
  <link rel="stylesheet" href="utils.css">

  <!-- Firebase SDK via CDN pubblico (funziona su qualsiasi hosting, incluso GitHub Pages).
       La config viene iniettata da config.js (generato da GitHub Actions via secrets).
       Fallback locale: copia config.example.js â†’ config.js con le tue chiavi. -->
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-database-compat.js"></script>
</head>

<body>

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     LANDING PAGE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="landingPage">
  <div id="landingLogo">ðŸŒ¿</div>
  <h1 class="landing-title">NutriPlan</h1>
  <p class="landing-sub">Il tuo piano alimentare personale.<br>Accedi per iniziare e sincronizzare i tuoi dati.</p>

  <div class="landing-cta-wrap">
    <!-- Stato caricamento mentre Firebase controlla la sessione -->
    <div class="landing-auth-loading" id="landingAuthLoading">
      <span class="landing-auth-spinner"></span> Verifica accessoâ€¦
    </div>

    <!-- Utente NON loggato: mostra Google sign-in -->
    <button class="btn-landing-google" id="landingGoogleBtn"
            onclick="landingSignIn()" style="display:none">
      <svg width="20" height="20" viewBox="0 0 18 18">
        <path fill="#4285F4" d="M17.64 9.2c0-.637-.057-1.251-.164-1.84H9v3.481h4.844c-.209 1.125-.843 2.078-1.796 2.717v2.258h2.908c1.702-1.567 2.684-3.874 2.684-6.615z"/>
        <path fill="#34A853" d="M9 18c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H.957v2.332A8.997 8.997 0 0 0 9 18z"/>
        <path fill="#FBBC05" d="M3.964 10.71A5.41 5.41 0 0 1 3.682 9c0-.593.102-1.17.282-1.71V4.958H.957A8.996 8.996 0 0 0 0 9c0 1.452.348 2.827.957 4.042l3.007-2.332z"/>
        <path fill="#EA4335" d="M9 3.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C13.463.891 11.426 0 9 0A8.997 8.997 0 0 0 .957 4.958L3.964 6.29C4.672 4.163 6.656 3.58 9 3.58z"/>
      </svg>
      Accedi con Google
    </button>

    <!-- Utente GIÃ€ loggato: bottone entra -->
    <button class="btn btn-primary btn-large" id="landingEnterBtn"
            onclick="enterApp()" style="display:none">
      â–¶ Bentornato!
    </button>

    <!-- Continua senza account -->
    <button class="landing-offline-btn" id="landingOfflineBtn"
            onclick="landingOffline()" style="display:none">
      Continua senza account â†’
    </button>
  </div>

  <p class="landing-privacy-note">
    Accedendo accetti la nostra
    <a href="#" onclick="event.preventDefault();openPrivacyModal()">Privacy Policy</a>.
    I tuoi dati alimentari restano privati e sincronizzati solo sul tuo account.
  </p>
</div>

[... RESTO DEL FILE IDENTICO, troncato per brevitÃ  ...]

<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     SCRIPTS â€” ordine obbligatorio
     FIX DEFINITIVO: piano.js caricato come script normale (NON module)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<!-- Libreria scanner barcode (html5-qrcode) -->
<script src="https://unpkg.com/html5-qrcode@2.3.8/html5-qrcode.min.js"></script>
<script src="config.js"></script>
<script src="firebase-config.js"></script>
<script src="data.js"></script>
<script src="storage.js"></script>

<!-- FIX: piano.js ora Ã¨ script normale, NON module -->
<script src="piano.js"></script>

<script src="piano_alimentare.js"></script>
<script src="dispensa.js"></script>
<script src="ricette.js"></script>
<script src="ricette_custom.js"></script>
<script src="spesa.js"></script>
<script src="storico.js"></script>
<script src="statistiche.js"></script>
<script src="profilo.js"></script>
<script src="pdf.js"></script>
<script src="tutorial.js"></script>
<script src="onboarding.js"></script>
<script src="gemini.js"></script>
<script src="app.js"></script>

</body>
</html>