/* ══════════════════════════════════════════════════
   NUTRIPLAN — layout.css
   Sezioni: 7. Layout  8. Intestazioni  9. Form Groups
            10. Input  11. Bottoni  12. Pill/Badge/Tag
            13. Callout  14. Page Tabs  15. Calendario
            16. Progresso
══════════════════════════════════════════════════ */

/* ══════════════════════════════════════════════════
   7. LAYOUT
══════════════════════════════════════════════════ */
.app-main {
  margin-top: var(--header-h);
  margin-bottom: var(--nav-h);
  overflow-x: hidden;
  position: relative;
  touch-action: pan-y;
}

/* Pagine a schermo intero con margine dal bordo quando in app; contenitore centrato */
body.app-visible .app-main {
  margin: 12px;
  margin-top: calc(var(--header-h) + 12px);
  margin-bottom: 12px;
  max-width: var(--content-w, 1200px);
  margin-left: auto;
  margin-right: auto;
}
@media (max-width: 767px) {
  body.app-visible .app-main {
    margin-left: max(16px, env(safe-area-inset-left));
    margin-right: max(16px, env(safe-area-inset-right));
    margin-top: calc(var(--header-h) + 16px);
    margin-bottom: 16px;
  }
  body.app-visible .page {
    padding: 20px 16px;
  }
}
body.app-visible .page {
  max-width: none;
  width: 100%;
  box-sizing: border-box;
}

/* FIX contenimento pagine:
   position:relative crea il containing block locale
   così nessun figlio absolute sfugge alla pagina */
.page {
  display: none;
  position: relative;
  isolation: isolate;
  overflow: hidden;
  padding: 22px 18px;
  max-width: var(--content-w);
  margin: 0 auto;
  animation: pageIn .45s cubic-bezier(0.4, 0, 0.2, 1);
}
.page.active {
  display: block;
  overflow: visible;
}

body.app-visible .app-main {
  font-size: .9rem;
}
body.app-visible .page {
  background: linear-gradient(160deg, #e8f5f0 0%, #f3fbf7 50%, #e8f5f0 100%);
  color: #0d2218;
  border-radius: var(--r-xl);
  box-shadow: 0 4px 24px rgba(0,0,0,.12);
  border: 1px solid rgba(13,34,24,.08);
}

[data-theme="dark"] body.app-visible .page {
  background: linear-gradient(160deg, #142a20 0%, #1b3429 50%, #142a20 100%);
  color: var(--text);
  border-color: rgba(255,255,255,.08);
  box-shadow: 0 4px 24px rgba(0,0,0,.4);
}

@keyframes pageIn {
  from { opacity: 0; transform: translateY(12px); }
  to   { opacity: 1; transform: none; }
}

/* Tab content dentro le pagine */
.page-tab-content {
  display: none;
  position: static;
  width: 100%;
}
.page-tab-content.active {
  display: block;
  animation: pageIn .45s cubic-bezier(0.4, 0, 0.2, 1);
}

@media (min-width: 768px) {
  .app-main { margin-bottom: 0; }
  .page     { padding: 28px 32px; margin: 0; }
}
@media (min-width: 1200px) {
  :root     { --sidebar-w: 270px; }
  .page     { padding: 32px 48px; }
}
@media (min-width: 1600px) {
  .page     { padding: 36px 64px; }
}

/* ══════════════════════════════════════════════════
   8. INTESTAZIONI
   Ogni pagina mostra il proprio titolo/sottotitolo; il riquadro
   "Casa - Il tuo spazio" è solo sulla pagina Casa (contenuto in #page-casa).
══════════════════════════════════════════════════ */
.page-header {
  display: flex;
  align-items: flex-start;
  justify-content: space-between;
  gap: 12px;
  margin-bottom: 22px;
  flex-wrap: wrap;
}
.page-header > div:first-child {
  min-width: 0;
  flex: 1 1 auto;
}
.page-header-title {
  font-size: 1.08rem;
  font-weight: 800;
  line-height: 1.25;
  word-wrap: break-word;
}

body.app-visible .page-header-title {
  color: #0d2218;
  letter-spacing: -0.02em;
}

.page-header-sub {
  font-size: .7rem;
  color: var(--text-light);
  margin-top: 4px;
  font-weight: 600;
  line-height: 1.3;
}

body.app-visible .page-header-sub {
  color: rgba(13,34,24,.72);
}

[data-theme="dark"] body.app-visible .page-header-title {
  color: var(--text);
}
[data-theme="dark"] body.app-visible .page-header-sub {
  color: var(--text-light);
}

/* Titoli con lettere evidenziate (usato in alcune CTA del piano).
   Reso neutro per non alterare singole lettere come la \"n\". */
.page-title-n {
  color: inherit;
  -webkit-text-stroke: 0;
  text-stroke: 0;
}

.page-header-actions {
  display: flex;
  gap: 8px;
  align-items: center;
  flex-shrink: 0;
  flex-wrap: wrap;
  justify-content: flex-end;
}
@media (max-width: 480px) {
  .page-header-actions { gap: 6px; }
}

@media (min-width: 768px) {
  .page-header-title { font-size: 1.12rem; }
}

.header-chip {
  display: inline-flex;
  align-items: center;
  gap: 5px;
  font-size: .72rem;
  font-weight: 700;
  color: var(--text-light);
  background: var(--bg-subtle);
  border: 1.5px solid var(--border);
  border-radius: var(--r-full);
  padding: 4px 12px;
}

.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 20px;
  gap: 12px;
}
.section-title    { font-size: .96rem; font-weight: 800; }
.section-subtitle { font-size: .7rem; color: var(--text-light); margin-top: 2px; font-weight: 600; }

/* Wrapper generico per blocchi di pagina (contenuto principale) */
.page-section {
  margin-bottom: 24px;
}

.divider-label {
  display: flex;
  align-items: center;
  gap: 12px;
  margin: 24px 0 18px;
}
.divider-label::before,
.divider-label::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--border);
}
.divider-label span {
  font-size: .66rem;
  font-weight: 700;
  color: var(--text-light);
  letter-spacing: .08em;
  text-transform: uppercase;
  white-space: nowrap;
}

/* ══════════════════════════════════════════════════
   9. FORM GROUPS
══════════════════════════════════════════════════ */
.form-group          { position: relative; margin-bottom: 16px; }
.form-group > label,
.form-group > .field-label {
  display: block;
  font-size: .7rem;
  font-weight: 700;
  color: var(--text-light);
  letter-spacing: .06em;
  text-transform: uppercase;
  margin-bottom: 8px;
  line-height: 1.3;
  transition: color var(--t);
}
.form-group:focus-within > label,
.form-group:focus-within > .field-label { color: var(--primary); }

.form-hint           { font-size: .7rem; color: var(--text-light); margin-top: 5px; line-height: 1.4; }
.form-hint.error     { color: var(--danger); }

/* Stato errore */
.form-group.has-error > label,
.form-group.has-error > .field-label      { color: var(--danger); }
.form-group.has-error input,
.form-group.has-error select,
.form-group.has-error textarea            { border-color: var(--danger); box-shadow: 0 0 0 4px rgba(239,68,68,.1); }

/* Stato successo */
.form-group.has-success > label,
.form-group.has-success > .field-label    { color: var(--success); }
.form-group.has-success input,
.form-group.has-success select,
.form-group.has-success textarea          { border-color: var(--success); box-shadow: 0 0 0 4px rgba(34,197,94,.1); }

/* Input con icona a destra */
.input-icon-wrap        { position: relative; }
.input-icon-wrap input  { padding-right: 40px; }
.input-icon {
  position: absolute;
  right: 12px; top: 50%;
  transform: translateY(-50%);
  font-size: .9em;
  color: var(--text-light);
  pointer-events: none;
}

/* ══════════════════════════════════════════════════
   10. INPUT
══════════════════════════════════════════════════ */
input[type="text"],
input[type="number"],
input[type="email"],
input[type="password"],
input[type="search"],
.form-input,
select,
textarea {
  width: 100%;
  font-family: var(--font);
  font-size: .9rem;
  color: var(--text);
  background: var(--bg-card);
  border: 1.5px solid var(--border);
  border-radius: var(--r);
  padding: 11px 14px;
  outline: none;
  transition: border-color var(--t), box-shadow var(--t);
  appearance: none;
  -webkit-appearance: none;
}
input:hover, select:hover, textarea:hover { border-color: var(--border-mid); }
input:focus, select:focus, textarea:focus {
  border-color: var(--primary);
  box-shadow: 0 0 0 4px rgba(61,139,111,.12);
}
input::placeholder, textarea::placeholder { color: var(--text-light); }

select {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' fill='none'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%238aa89e' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  padding-right: 36px;
  cursor: url('cursor-gold-ring.svg') 12 12, pointer;
}
[data-theme="dark"] select {
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' fill='none'%3E%3Cpath d='M1 1l5 5 5-5' stroke='%235e8a7a' stroke-width='1.6' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
}
textarea { resize: vertical; min-height: 96px; line-height: 1.6; }

/* Search bar */
.search-bar-row      { display: flex; gap: 10px; align-items: center; margin-bottom: 16px; }
.search-input-wrap   { position: relative; flex: 1; }
.search-input-wrap input { padding-left: 38px; padding-right: 36px; }
.search-icon {
  position: absolute; left: 12px; top: 50%;
  transform: translateY(-50%);
  font-size: .9em; color: var(--text-light); pointer-events: none;
}
.search-clear-btn {
  position: absolute; right: 10px; top: 50%;
  transform: translateY(-50%);
  background: none; border: none; cursor: url('cursor-gold-ring.svg') 12 12, pointer;
  font-size: .82em; color: var(--text-light);
  padding: 4px; border-radius: var(--r-xs);
  transition: all var(--t);
}
.search-clear-btn:hover { color: var(--danger); background: #fee2e2; }

/* Toggle switch */
.toggle-row {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 12px 0;
  border-bottom: 1px solid var(--border);
  gap: 16px;
}
.toggle-row:last-child  { border-bottom: none; }
.toggle-label           { font-size: .86rem; font-weight: 700; }
.toggle-sublabel        { font-size: .72rem; color: var(--text-light); margin-top: 2px; }

.toggle-switch {
  position: relative;
  width: 44px; height: 24px;
  background: var(--border-mid);
  border-radius: var(--r-full);
  cursor: url('cursor-gold-ring.svg') 12 12, pointer; flex-shrink: 0; border: none;
  transition: background var(--t);
}
.toggle-switch::after {
  content: '';
  position: absolute; top: 2px; left: 2px;
  width: 20px; height: 20px;
  background: #fff; border-radius: 50%;
  box-shadow: 0 1px 4px rgba(0,0,0,.2);
  transition: transform var(--t);
}
.toggle-switch.on        { background: var(--primary); }
.toggle-switch.on::after { transform: translateX(20px); }

/* ══════════════════════════════════════════════════
   11. BOTTONI
══════════════════════════════════════════════════ */
.btn {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 7px;
  padding: 10px 22px;
  border-radius: var(--r);
  font-family: var(--font);
  font-size: .86rem;
  font-weight: 700;
  cursor: url('cursor-gold-ring.svg') 12 12, pointer;
  border: 1.5px solid transparent;
  transition: all var(--t);
  white-space: nowrap;
  letter-spacing: .01em;
}
.btn:focus-visible { outline: 3px solid var(--primary); outline-offset: 2px; }
.btn:active        { transform: scale(.97); }

.btn-primary {
  background: var(--primary); color: #fff;
  border-color: var(--primary-dark);
  box-shadow: 0 2px 10px rgba(61,139,111,.28);
}
.btn-primary:hover {
  background: var(--primary-dark);
  box-shadow: 0 4px 18px rgba(61,139,111,.38);
  transform: translateY(-1px);
}
.btn-secondary {
  background: var(--bg-card); color: var(--text-mid);
  border-color: var(--border);
  box-shadow: var(--shadow-xs);
}
.btn-secondary:hover {
  background: var(--bg-hover); color: var(--text);
  border-color: var(--border-mid);
  transform: translateY(-1px);
}
.btn-danger {
  background: #fff1f1; color: var(--danger);
  border-color: #fecaca;
}
.btn-danger:hover { background: var(--danger); color: #fff; border-color: var(--danger); }

.btn-ghost { background: none; color: var(--text-mid); border-color: transparent; }
.btn-ghost:hover { background: var(--bg-hover); }

.btn-google {
  display: flex; align-items: center; justify-content: center; gap: 10px;
  width: 100%; padding: 11px 18px;
  border-radius: var(--r);
  background: var(--bg-card); color: var(--text);
  border: 1.5px solid var(--border);
  font-family: var(--font); font-size: .88rem; font-weight: 700;
  cursor: url('cursor-gold-ring.svg') 12 12, pointer;
  box-shadow: var(--shadow-xs);
  transition: all var(--t);
}
.btn-google:hover {
  border-color: var(--border-mid);
  box-shadow: var(--shadow-sm);
  transform: translateY(-1px);
}

.btn-small { padding: 6px 14px;  font-size: .74rem; border-radius: var(--r-sm); }
.btn-large { padding: 14px 34px; font-size: 1rem;   border-radius: var(--r-lg); }

/* Stile landing in app: pill, bordo, colori coerenti con pannello */
body.app-visible .page .btn-primary {
  background: transparent;
  color: rgba(13,34,24,.8);
  border: 1px solid rgba(13,34,24,.3);
  border-radius: var(--r-full);
  letter-spacing: .04em;
  box-shadow: none;
}
body.app-visible .page .btn-primary:hover {
  background: rgba(13,34,24,.1);
  color: #0d2218;
  border-color: rgba(13,34,24,.5);
  transform: translateY(-1px);
}
body.app-visible .page .btn-secondary {
  background: rgba(13,34,24,.06);
  color: #0d2218;
  border-color: rgba(13,34,24,.2);
}
body.app-visible .page .btn-secondary:hover {
  background: rgba(13,34,24,.12);
  border-color: rgba(13,34,24,.35);
}

body.app-visible .page .header-chip {
  background: rgba(13,34,24,.08);
  color: rgba(13,34,24,.85);
  border-color: rgba(13,34,24,.28);
}

[data-theme="dark"] body.app-visible .page .btn-primary,
[data-theme="dark"] body.app-visible .page .btn-secondary {
  color: var(--text);
  border-color: var(--border);
  background: var(--bg-subtle);
}
[data-theme="dark"] body.app-visible .page .btn-primary:hover,
[data-theme="dark"] body.app-visible .page .btn-secondary:hover {
  background: var(--bg-hover);
  border-color: var(--border-mid);
}
[data-theme="dark"] body.app-visible .page .header-chip {
  background: var(--bg-subtle);
  color: var(--text-mid);
  border-color: var(--border);
}

/* ── App visible: contrasto .page (light panel) ── */
body.app-visible .page .section-title {
  color: #0d2218;
}
body.app-visible .page .section-subtitle {
  color: rgba(13,34,24,.78);
}
body.app-visible .page .divider-label span {
  color: rgba(13,34,24,.72);
}
body.app-visible .page .divider-label::before,
body.app-visible .page .divider-label::after {
  background: rgba(13,34,24,.18);
}
body.app-visible .page .form-group > label,
body.app-visible .page .form-group > .field-label {
  color: rgba(13,34,24,.75);
}
body.app-visible .page .form-hint {
  color: rgba(13,34,24,.78);
}
body.app-visible .page .input-icon {
  color: rgba(13,34,24,.68);
}
body.app-visible .page input,
body.app-visible .page select,
body.app-visible .page textarea {
  color: #0d2218;
  background: rgba(255,255,255,.95);
  border-color: rgba(13,34,24,.2);
}
body.app-visible .page input::placeholder,
body.app-visible .page textarea::placeholder {
  color: rgba(13,34,24,.58);
}
body.app-visible .page .search-icon {
  color: rgba(13,34,24,.68);
}
body.app-visible .page .search-clear-btn {
  color: rgba(13,34,24,.68);
}
body.app-visible .page .search-clear-btn:hover {
  color: var(--danger);
}
body.app-visible .page .toggle-label {
  color: #0d2218;
}
body.app-visible .page .toggle-sublabel {
  color: rgba(13,34,24,.78);
}
body.app-visible .page .toggle-row {
  border-bottom-color: rgba(13,34,24,.12);
}
body.app-visible .page .piano-section-label {
  color: #0d2218;
  border-top-color: rgba(13,34,24,.12);
}

/* Bottone + aggiungi ingrediente */
.btn-add-ing {
  width: 42px; height: 42px; flex-shrink: 0;
  border-radius: var(--r);
  background: var(--primary); color: #fff; border: none;
  font-size: 1.4rem; cursor: url('cursor-gold-ring.svg') 12 12, pointer;
  display: flex; align-items: center; justify-content: center;
  box-shadow: 0 2px 10px rgba(61,139,111,.3);
  transition: all var(--t);
}
.btn-add-ing:hover { background: var(--primary-dark); transform: scale(1.06); }

/* Bottoni rc-* (usati nelle ricette) */
.rc-btn {
  display: inline-flex; align-items: center;
  justify-content: center; gap: 6px;
  padding: 9px 18px; border-radius: var(--r);
  border: 1.5px solid transparent;
  font-family: var(--font); font-size: .84rem; font-weight: 700;
  cursor: url('cursor-gold-ring.svg') 12 12, pointer; transition: all var(--t); white-space: nowrap;
}
.rc-btn-primary {
  background: var(--primary); color: #fff;
  border-color: var(--primary-dark);
  box-shadow: 0 2px 8px rgba(61,139,111,.25);
}
.rc-btn-primary:hover { background: var(--primary-dark); transform: translateY(-1px); }
.rc-btn-outline {
  background: var(--bg-card); color: var(--text-mid);
  border-color: var(--border);
}
.rc-btn-outline:hover { background: var(--bg-hover); color: var(--text); border-color: var(--border-mid); }
.rc-btn-sm { padding: 6px 12px; font-size: .76rem; border-radius: var(--r-sm); }

.rc-btn-icon {
  width: 30px; height: 30px;
  background: var(--bg-subtle); border: 1.5px solid var(--border);
  border-radius: var(--r-sm);
  cursor: url('cursor-gold-ring.svg') 12 12, pointer; font-size: .88rem; transition: all var(--t);
  display: flex; align-items: center; justify-content: center;
  color: var(--text-mid); flex-shrink: 0;
}
.rc-btn-icon:hover { background: var(--primary); color: #fff; border-color: var(--primary); }

/* ══════════════════════════════════════════════════
   12. PILL / BADGE / TAG
══════════════════════════════════════════════════ */
.pill {
  display: inline-flex; align-items: center; gap: 4px;
  padding: 3px 11px; border-radius: var(--r-full);
  font-size: .68rem; font-weight: 700;
  background: var(--bg-subtle); color: var(--text-mid);
  border: 1px solid var(--border);
}
.pill-primary { background: var(--primary-light); color: var(--primary); border-color: var(--primary-mid); }
.pill-success { background: #dcfce7; color: #166534; border-color: #bbf7d0; }
.pill-warning { background: #fef3c7; color: #92400e; border-color: #fde68a; }
.pill-danger  { background: #fee2e2; color: #991b1b; border-color: #fecaca; }
[data-theme="dark"] .pill-success { background: #052e16; color: #4ade80; border-color: #14532d; }
[data-theme="dark"] .pill-warning { background: #2d1b00; color: #fcd34d; border-color: #78350f; }

.tag-row { display: flex; flex-wrap: wrap; gap: 6px; margin: 6px 0; }
.tag {
  display: inline-flex; align-items: center; gap: 4px;
  font-size: .68rem; font-weight: 700;
  padding: 3px 10px; border-radius: var(--r-full);
  background: var(--bg-subtle); color: var(--text-mid);
  border: 1px solid var(--border);
}
.tag-colazione { background: #fffbeb; color: #a07000; border-color: #fde68a; }
.tag-pranzo    { background: var(--primary-light); color: var(--primary); border-color: var(--primary-mid); }
.tag-cena      { background: #eff6ff; color: #1d4ed8; border-color: #bfdbfe; }
.tag-spuntino  { background: #f0fdf4; color: #166534; border-color: #bbf7d0; }
.tag-merenda   { background: #faf5ff; color: #6b21a8; border-color: #d8b4fe; }
.tag-remove {
  background: none; border: none; cursor: url('cursor-gold-ring.svg') 12 12, pointer;
  font-size: .7em; color: var(--text-light);
  padding: 0 0 0 2px; transition: color var(--t);
}
.tag-remove:hover { color: var(--danger); }

.counter-badge {
  display: inline-flex; align-items: center; justify-content: center;
  min-width: 18px; height: 18px; padding: 0 5px;
  background: var(--danger); color: #fff;
  font-size: .6rem; font-weight: 800;
  border-radius: var(--r-full); line-height: 1;
}
.counter-badge.green { background: var(--success); }
.counter-badge.amber { background: var(--warning); }

/* ══════════════════════════════════════════════════
   13. CALLOUT
══════════════════════════════════════════════════ */
.callout {
  display: flex; align-items: flex-start; gap: 10px;
  padding: 12px 14px; border-radius: var(--r-lg);
  font-size: .82rem; line-height: 1.5;
  border: 1.5px solid var(--border);
  margin-bottom: 14px;
}
.callout-icon { font-size: 1.1rem; flex-shrink: 0; margin-top: 1px; }
.callout-text { flex: 1; }
.callout-text strong { display: block; font-weight: 800; margin-bottom: 2px; }

.callout-info    { background: #eff6ff; border-color: #bfdbfe; color: #1e3a5f; }
.callout-success { background: #f0fdf4; border-color: #bbf7d0; color: #14532d; }
.callout-warning { background: #fffbeb; border-color: #fde68a; color: #78350f; }
.callout-danger  { background: #fff1f2; border-color: #fecdd3; color: #9f1239; }
[data-theme="dark"] .callout-info    { background: #0c1d3a; border-color: #1e3a5f; color: #93c5fd; }
[data-theme="dark"] .callout-success { background: #052e16; border-color: #14532d; color: #4ade80; }
[data-theme="dark"] .callout-warning { background: #2d1b00; border-color: #78350f; color: #fcd34d; }
[data-theme="dark"] .callout-danger  { background: #450a0a; border-color: #7f1d1d; color: #f87171; }

/* ══════════════════════════════════════════════════
   14. PAGE TABS
══════════════════════════════════════════════════ */
.page-tabs {
  display: flex; gap: 3px;
  background: var(--bg-subtle);
  border: 1.5px solid var(--border);
  padding: 4px; border-radius: var(--r-xl);
  margin-bottom: 24px;
  overflow-x: auto; scrollbar-width: none;
  -webkit-overflow-scrolling: touch;
}
.page-tabs::-webkit-scrollbar { display: none; }

.page-tab {
  padding: 8px 14px; background: none; border: none;
  border-radius: var(--r-lg);
  font-size: .8rem; font-weight: 700;
  color: var(--text-light);
  cursor: url('cursor-gold-ring.svg') 12 12, pointer; white-space: nowrap; flex-shrink: 0;
  transition: all var(--t);
}
.page-tab:hover  { color: var(--text); }
.page-tab.active {
  background: var(--bg-card); color: var(--primary);
  box-shadow: var(--shadow-xs); font-weight: 800;
}

/* App: tab e filtri in stile trasparente come Esplora */
body.app-visible .page .page-tabs {
  background: rgba(13,34,24,.04);
  border-color: rgba(13,34,24,.15);
}
body.app-visible .page .page-tab {
  padding: 12px 20px;
  font-size: .88rem;
  letter-spacing: .06em;
  background: transparent;
  border: 1px solid rgba(13,34,24,.25);
  color: rgba(13,34,24,.75);
}
body.app-visible .page .page-tab:hover {
  background: rgba(13,34,24,.08);
  border-color: rgba(13,34,24,.4);
  color: #0d2218;
}
body.app-visible .page .page-tab.active {
  background: rgba(13,34,24,.12);
  border-color: rgba(13,34,24,.4);
  color: #0d2218;
  box-shadow: none;
}
[data-theme="dark"] body.app-visible .page .page-tabs {
  background: rgba(255,255,255,.04);
  border-color: rgba(255,255,255,.12);
}
[data-theme="dark"] body.app-visible .page .page-tab {
  border-color: var(--border); color: var(--text-mid);
}
[data-theme="dark"] body.app-visible .page .page-tab:hover {
  background: var(--bg-hover); border-color: var(--border-mid); color: var(--text);
}
[data-theme="dark"] body.app-visible .page .page-tab.active {
  background: transparent; border-color: rgba(255,255,255,.6); color: var(--text);
}

/* Tabs underline (variante) */
.tabs-underline {
  display: flex; border-bottom: 1.5px solid var(--border);
  margin-bottom: 20px; overflow-x: auto; scrollbar-width: none;
}
.tabs-underline::-webkit-scrollbar { display: none; }
.tab-ul {
  padding: 10px 18px; background: none; border: none;
  font-family: var(--font); font-size: .84rem; font-weight: 700;
  color: var(--text-light); cursor: url('cursor-gold-ring.svg') 12 12, pointer; white-space: nowrap;
  border-bottom: 2.5px solid transparent; margin-bottom: -1.5px;
  transition: all var(--t);
}
.tab-ul:hover  { color: var(--text); }
.tab-ul.active { color: var(--primary); border-bottom-color: var(--primary); }

body.app-visible .page .tab-ul {
  padding: 12px 20px;
  font-size: .88rem;
  letter-spacing: .06em;
  color: rgba(13,34,24,.75);
}
body.app-visible .page .tab-ul:hover { color: #0d2218; }
body.app-visible .page .tab-ul.active {
  color: #0d2218;
  border-bottom-color: rgba(13,34,24,.5);
}
[data-theme="dark"] body.app-visible .page .tab-ul {
  color: var(--text-mid);
}
[data-theme="dark"] body.app-visible .page .tab-ul:hover,
[data-theme="dark"] body.app-visible .page .tab-ul.active {
  color: var(--text);
}
[data-theme="dark"] body.app-visible .page .tab-ul.active {
  border-bottom-color: var(--primary);
}

/* ══════════════════════════════════════════════════
   15. CALENDARIO
══════════════════════════════════════════════════ */
.calendar-wrap     { margin-bottom: 20px; }
.calendar-bar-wrap {
  overflow-x: auto; scrollbar-width: none;
  padding: 4px 0 10px;
}
.calendar-bar-wrap::-webkit-scrollbar { display: none; }
.calendar-bar { display: flex; gap: 6px; width: max-content; }

.cal-day {
  display: flex; flex-direction: column; align-items: center;
  padding: 10px 14px; min-width: 58px;
  background: var(--bg-card); border: 1.5px solid var(--border);
  border-radius: var(--r-lg); cursor: url('cursor-gold-ring.svg') 12 12, pointer; transition: all var(--t);
}
.cal-day:hover {
  border-color: var(--primary-mid);
  background: var(--primary-xl);
  transform: translateY(-1px);
}
.cal-day.today  { border-color: var(--primary-mid); background: var(--primary-xl); }
.cal-day.active {
  background: var(--primary); border-color: var(--primary-dark);
  box-shadow: 0 4px 14px rgba(61,139,111,.3);
  transform: translateY(-1px);
}

.cal-day-name  { font-size: .58rem; font-weight: 800; color: var(--text-light); text-transform: uppercase; letter-spacing: .07em; }
.cal-day-num   { font-size: 1.1rem; font-weight: 800; color: var(--text); margin: 3px 0; }
.cal-day-month { font-size: .58rem; color: var(--text-light); font-weight: 700; }

.cal-day.active .cal-day-name,
.cal-day.active .cal-day-num,
.cal-day.active .cal-day-month { color: #fff; }
.cal-day.today:not(.active) .cal-day-num { color: var(--primary); }

.cal-dot {
  width: 5px; height: 5px;
  border-radius: 50%; background: var(--primary); margin-top: 3px;
}
.cal-day.active .cal-dot { background: rgba(255,255,255,.65); }
.current-date-label {
  font-size: .78rem; font-weight: 700;
  color: var(--text-light); text-align: center; margin-top: 6px;
}

/* ══════════════════════════════════════════════════
   16. PROGRESSO
══════════════════════════════════════════════════ */
.progress-block        { margin-bottom: 12px; }
.progress-block-header {
  display: flex; align-items: center;
  justify-content: space-between; margin-bottom: 6px;
}
.progress-label { font-size: .76rem; font-weight: 700; color: var(--text-mid); }
.progress-value { font-size: .76rem; font-weight: 800; color: var(--primary); }
.progress-track { height: 7px; background: var(--border); border-radius: var(--r-full); overflow: hidden; }
.progress-fill  {
  height: 100%; border-radius: var(--r-full);
  background: linear-gradient(90deg, var(--primary), var(--primary-mid));
  transition: width .5s ease;
}
.progress-fill.warn { background: linear-gradient(90deg, var(--warning), #fbbf24); }
.progress-fill.over { background: linear-gradient(90deg, var(--danger),  #f87171); }

.rc-progress-track { height: 6px; background: var(--border); border-radius: var(--r-full); overflow: hidden; flex: 1; }
.rc-progress-fill  { height: 100%; background: var(--primary); border-radius: var(--r-full); transition: width .5s ease; }
